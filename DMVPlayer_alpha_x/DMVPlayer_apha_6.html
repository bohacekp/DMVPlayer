<!DOCTYPE html>
<html>
  <body>
    <!-- 1. The <iframe> (and video player) will replace this <div> tag. -->
<!--<div id="player"></div> -->
<video id="my_video_1" width="640" height="360" preload="auto" poster>
<source src="test2.mp4" id="movie" type="video/mp4">
  <source src="https://dl.dropboxusercontent.com/u/29885430/spinfalling.mp4" id="movie" type="video/mp4">
  <source src="https://dl.dropboxusercontent.com/u/29885430/test2.ogg" type="video/ogg">
</video>
 <script>
      // 2. This code loads the IFrame Player API code asynchronously.
      
	  /*var tag = document.createElement('script');

      tag.src = "https://www.youtube.com/iframe_api";
      var firstScriptTag = document.getElementsByTagName('script')[0];
      firstScriptTag.parentNode.insertBefore(tag, firstScriptTag);

      // 3. This function creates an <iframe> (and YouTube player)
      //    after the API code downloads.
      var player;
      function onYouTubeIframeAPIReady() {
        player = new YT.Player('player', {
		height: '390',
        width: '640',
		videoId: 't-FAePvFujg',
		playerVars: {
               html5: 1,
               controls: 1,
            } ,
		  events: {
            'onReady': onPlayerReady,
            'onStateChange': onPlayerStateChange
          }
        });
      }

      // 4. The API will call this function when the video player is ready.
     console.log("player ready?");
	  function onPlayerReady(event) {
        event.target.playVideo();
      }
	console.log("yes,player ready");
      // 5. The API calls this function when the player's state changes.
      //    The function indicates that when playing a video (state=1),
      //    the player should play for six seconds and then stop.
	  
      var done = false;
      function onPlayerStateChange(event) {
      }
	  */
	  var player = document.getElementById('my_video_1');
    </script>
	<style>

	table,th,td
	{
	font-family: "calibri";
	border-collapse:collapse;
	vertical-align:center;
	position: relative;
	}
	td{
	background-color:rgb(200,200,200);
	}
	th{
	background-color:rgb(230,230,230);
	}
	</style>
	
<table border="1">
	<caption>Video Controls</caption>
	<tr>
		<td>First Frame</td>
		<td>Previous Frame</td>
		<td>Play</td>
		<td>Pause</td>
		<td>Next Frame</td>
	<!--	<td>Last Frame</td> -->
		<td>Go To Frame</td>
		<td>Be Careful with this</td>
	</tr>
	<tr>
		<th><input type="button" value="    {{    " name="beginning" onclick="goToTime(0)" /></th>
		<th><input type="button" value="    {     " name="skipToPrev" onclick="prevFrame()" /></th>
		<th><input type="button" value="    >     " name="playVid" onclick='play()' /></th>
		<th><input type="button" value="    ||    " name="pauseVid" onclick='pause()' /></th>
		<th><input type="button" value="    }     " name="skipToNext" onclick="fwdFrame()" /></th>
		<!-- <th><input type="button" value="    }}    " name="end" onclick="myPlayer.currentTime = my_video_1.duration" /></th> -->
		<th><input type="text" id="FrameJump" size="1"/>
		<input type="button" value="Go!" name="goToFrameButton" onclick="goToEnteredFrame()"/></th>
		<th><input type="button" value="dont click me" name="skipToNext" onclick='alert("why did you click me?")' </th>
		<!--<th><input type="button" value="hi!" name="hallo" onclick="seek(5)" </th>-->
	</tr>
		
</table>
	
<script>
var framerate = 29.97;
	function goToEnteredFrame(){
		console.log("Going To Frame:");
		var thisFrame = document.getElementById("FrameJump").value;
		console.log(thisFrame);
		seek((1/framerate)*(thisFrame)+(1/framerate));
		pause();
		console.log("go to frame:"+thisFrame);
	}
	
	
	//function fwdFrame_(){
		//player.pauseVideo();
		//player.playVideo();
		//player.playVideo();
	//}
	function prevFrame(){
		pause();
		//play();
		//player.currentTime=player.currentTime-(2/framerate);
		//setTimeout(function(){player.pause()},(1/framerate));
		player.currentTime=player.currentTime-(1/framerate);
		//play();
		console.log("prev frame");
		//player.playVideo();
		//pause();
		//setTimeout(pause(), 1);
	}
	function pause(){
		player.pause();
		console.log("pause");
	}
	function play(){
		player.play();
		console.log("play");
	}
	function seek(time){
		pause();
		player.currentTime=time;
		console.log("seek");
	}
	function goToTime(time){
		player.currentTime=time;
		console.log("goToTime:" + time);
	}
	function fwdFrame(){
		//play();
		play();
		setTimeout(function(){player.pause()}, 990/framerate);
		//pause();
		//player.currentTime=player.currentTime+(1/framerate);
		//setTimeout(function() {player.pause()}, (100/3));
		console.log("fwd frame, time: "+player.currentTime);
	}
	window.addEventListener('keydown',this.check,false);
	function check(e) {
		var code = e.keyCode;
		//Left arrow pressed
		if (code == 37)
			prevFrame();
		//Right arrow pressed
		if (code == 39)
			fwdFrame();
		//Spacebar pressed
		if (code == 32)
			pause();
	}
</script>
</body>
	
	
	

</html>

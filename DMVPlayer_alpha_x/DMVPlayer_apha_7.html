<!DOCTYPE html>
<html>
 <body>
    <!-- 1. The <iframe> (and video player) will replace this <div> tag. -->
<!--<div id="player"></div> -->
<video id="my_video_1" width="100%" preload="auto" poster>
  <source src="https://dl.dropboxusercontent.com/u/21775654/spin%20falling.mp4" id="movie" type="video/mp4">
 </video>

 <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.6.4/jquery.min.js"></script>


<div id="scrubber">
    <div id="progress"></div>
</div>
 
 <script>
document.getElementById("my_video_1").style.maxWidth="980px";
document.getElementById("scrubber").style.maxWidth="980px";
var player = document.getElementById('my_video_1');
    </script>
<head>
<style type="text/css">
    #vid {
        width: 640px;
        height: 360px;
    }

    #scrubber {
        position: relative;
        width: 100%;
        height: 20px;
        background-color: rgb(200,200,200);
    }

    #progress {
        width: 0;
        height: 20px;
        background-color: rgb(180,110,40);
    }
</style>
<style>

table,th,td
{
font-family: "calibri";
border-collapse:collapse;
vertical-align:center;
position: relative;
}
td{
background-color:rgb(200,200,200);
}
th{
background-color:rgb(230,230,230);
}
</style>

<table id="button_table_1" width ="100%" border="0">

<tr>
<th><input type="button" value=" |<< " name="beginning" onclick="goToTime(0)" /></th>
<th><input type="button" value=" |< " name="skipToPrev" onclick="prevFrame()" /></th>
<th><input type="button" value=" >/|| " name="playPause" onclick='playPause()' /></th>
<!--<th><button type="button" id="playPause" onclick=playPause()>></button></th>-->
<!--<th><input type="button" value=" || " name="pauseVid" onclick='pause()' /></th> -->
<th><input type="button" value=" >| " name="skipToNext" onclick="fwdFrame()" /></th>
<!-- <th><input type="button" value=" >>| " name="end" onclick="myPlayer.currentTime = my_video_1.duration" /></th> -->
<th><input type="text" id="FrameJump" size="1"/>
<input type="button" value="Go!" name="goToFrameButton" onclick="goToEnteredFrame()"/></th>
<!--<th><input type="button" value="dont click me" name="skipToNext" onclick='alert("why did you click me?")' </th> -->
<!--<th><input type="button" value="hi!" name="hallo" onclick="seek(5)" </th>-->
</tr>


    </script>
	<style>

	table,th,td
	{
	font-family: "calibri";
	border-collapse:collapse;
	vertical-align:center;
	position: relative;
	}
	td{
	background-color:rgb(200,200,200);
	}
	th{
	background-color:rgb(230,230,230);
	}
	</style>


</table>
<script>
document.getElementById("button_table_1").style.maxWidth="980px";
var framerate = 30;

function goToEnteredFrame(){
console.log("Going To Frame:");
var thisFrame = document.getElementById("FrameJump").value;
console.log(thisFrame);
seek((1/framerate)*(thisFrame)+(1/framerate));
pause();
console.log("go to frame:"+thisFrame);
}



function prevFrame(){
pause();
player.currentTime=player.currentTime-(1/framerate);
//play();
console.log("prev frame");
//player.playVideo();
//pause();
//setTimeout(pause(), 1);
}

function playPause(){
if (player.paused)
  play();
//document.getElementByName("playPause").innerHTML="||";
else
   pause();
// document.getElementByName("playPause").innerHTML=">";
}

function pause(){
player.pause();
console.log("pause");
}
function play(){
player.play();
console.log("play");
}
function seek(time){
pause();
player.currentTime=time;
console.log("seek");
}
function goToTime(time){
player.currentTime=time;
console.log("goToTime:" + time);
}
function fwdFrame(){
pause(); //this section of code works on all browsers, but skips
player.currentTime=player.currentTime+(1/framerate);

/*  This section of code works well on chrome, but not on other browsers
play();
setTimeout(function() {player.pause()}, (990/framerate));
console.log("fwd frame, time: "+player.currentTime);
*/
}

window.addEventListener('keydown',this.check,false);
function check(e) {
var code = e.keyCode;
//Left arrow pressed
if (code == 37)
prevFrame();
//Right arrow pressed
if (code == 39)
fwdFrame();
//Down arrow pressed
if (code == 40)
prevFrame();
//Up arrow pressed
if (code == 38)
fwdFrame();
//Spacebar pressed
if (code == 32)
playPause();
}

	function goToEnteredFrame(){
		console.log("Going To Frame:");
		var thisFrame = document.getElementById("FrameJump").value;
		console.log(thisFrame);
		seek((1/framerate)*(thisFrame)+(1/framerate));
		pause();
		console.log("go to frame:"+thisFrame);
	}



	function prevFrame(){
		pause();
		player.currentTime=player.currentTime-(1/framerate);
		//play();
		console.log("prev frame");
		//player.playVideo();
		//pause();
		//setTimeout(pause(), 1);
	}

	function playPause(){ 
		if (player.paused) 
 		 play();
		 //document.getElementByName("playPause").innerHTML="||";
		else 
  		 pause();
		// document.getElementByName("playPause").innerHTML=">";
	} 

	function pause(){
		player.pause();
		console.log("pause");
	}
	function play(){
		player.play();
		console.log("play");
	}
	function seek(time){
		pause();
		player.currentTime=time;
		console.log("seek");
	}
	function goToTime(time){
		player.currentTime=time;
		console.log("goToTime:" + time);
	}
	function fwdFrame(){
		//play();
		pause();
		player.currentTime=player.currentTime+(1/framerate);
		//setTimeout(function() {player.pause()}, (990/framerate));
		console.log("fwd frame, time: "+player.currentTime);
	}
	window.addEventListener('keydown',this.check,false);
	function check(e) {
		var code = e.keyCode;
		//Left arrow pressed
		if (code == 37)
			prevFrame();
		//Right arrow pressed
		if (code == 39)
			fwdFrame();
		//Down arrow pressed
		if (code == 40)
			prevFrame();
		//Up arrow pressed
		if (code == 38)
			fwdFrame();
		//Spacebar pressed
		if (code == 32)
			playPause();
	}

</script>
</body>

<script type="text/javascript">
    $(document).ready(function () {
		// the $ says that it can use the jquery functions, it is purely cosmetic, these variables do not need a $, but it is an easy way to keep track of which variables are which
        var $video = $("#my_video_1"); //like getElementById(vid) but the returned object is passed to a jquery function

        var $scrubber = $("#scrubber");
        var $progress = $("#progress");
        
        $video.bind("timeupdate", videoTimeUpdateHandler);
        $scrubber.bind("mousedown", scrubberMouseDownHandler);
        
        function videoTimeUpdateHandler(e) {
            var video = $video.get(0);
            var percent = video.currentTime / video.duration;
            updateProgressWidth(percent);
        }
        
        function scrubberMouseDownHandler(e) {
            var $this = $(this);
            var x = e.pageX - $this.offset().left;
            var percent = x / $this.width();
            updateProgressWidth(percent);
            updateVideoTime(percent);
        }
        
        function updateProgressWidth(percent) {
            $progress.width((percent * 100) + "%");
        }
        
        function updateVideoTime(percent) {
            var video = $video.get(0);
            video.currentTime = percent * video.duration;
        }
    });
</script>
</html>

